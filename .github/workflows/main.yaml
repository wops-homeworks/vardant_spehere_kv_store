name: "Main Workflow"

on:
  workflow_call:

jobs:
  build:
    name: Build Laravel App
    uses: ./.github/workflows/build.yaml
    with:
      version: "8.2"

  test:
    name: Test Laravel App
    needs: [build]
    uses: ./.github/workflows/test.yaml


  # dockernize:
  #   runs-on: ubuntu-alpine
  #   steps:
  #     - name: Login Docker Hub
  #       uses: docker/login-action@v3
  #       with:
  #         username: ${{ secrets.DOCKERHUB_USERNAME }}
  #         password: ${{ secrets.DOCKERHUB_TOKEN }}
    
  #     - name: Build Docker image
  #       run: |
  #         docker build -t laravel-app .

  #     - name: Tag Docker image
  #       run: |
  #         docker tag laravel-app:latest ${{ secrets.DOCKERHUB_USERNAME }}/laravel-app:latest

  #     - name: Push To Docker Hub
  #       run: |
  #         docker push ${{ secrets.DOCKERHUB_USERNAME }}/laravel-app:latest
